<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="description" content="An education focused debugger">
<title>Stackium</title>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */

@import url("https://fonts.googleapis.com/css?family=Source+Code+Pro");
@import url(https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css);
/* Default asciidoc style framework - important */

/* CUSTOMISATIONS */
/* Change the values in root for quick customisation. If you want even more fine grain... venture further. */

:root {
  --maincolor: #FFFFFF;
  --primarycolor: rgb(232, 233, 237);
  --secondarycolor: rgb(232, 233, 237);
  --tertiarycolor: #a3abba;
  --sidebarbackground: #43335b;
  --background: #322342;
  --linkcolor: rgb(98, 196, 255);
  --glow: #8e3075;
  --linkcoloralternate: #ff3c74;
  --white: #FFFFFF;
  --black: #000000;
}

body {
  background-color: var(--background);
  color: var(--maincolor);
}

#toctitle {
  color: #ca3faa;
  /* glow */
  text-shadow: 0 0 10px var(--glow);
}

#toc.toc2,
#toc.toc {
  background: var(--background) !important;
  background-color: var(--background) !important;
  color: var(--linkcolor) !important;
  text-align: left !important;
  border-color: var(--glow) !important;
}

#toc.toc {
  box-shadow: 0 0 10px var(--glow);
  background-color: var(--sidebarbackground) !important;
}

#toc.toc2 {
  border-right: none !important;
}

.sidebarblock,
.admonitionblock,
.listingblock {
  background-color: var(--sidebarbackground);
  border: #8e3075 1px solid;
  border-radius: 5px;
  /* glow */
  box-shadow: 0 0 10px var(--glow);
  margin-bottom: 1em;
}

code,
pre.highlight {
  background: var(--sidebarbackground) !important;
  color: var(--maincolor) !important;
}

.sidebarblock code,
.admonitionblock code {
  background: #594478 !important;
}

a {
  color: var(--linkcolor) !important;
}

a:hover {
  color: var(--background) !important;
  background-color: var(--linkcolor);
}

.admonitionblock {
  /* radius */
  color: var(--maincolor);
}

.admonitionblock td.icon .icon-tip::before {
  color: lightblue;
  text-shadow: none;
}

/* .admonitionblock {
  b
}

.admonitionblock .tip {} */

body {
  font-family: "Source Code Pro", sans-serif;
}

/* Text styles */
h1 {
  color: var(--primarycolor) !important;
  font-family: "Source Code Pro", sans-serif;
}

h2,
h3,
h4,
h5,
h6 {
  color: var(--secondarycolor) !important;
  font-family: "Source Code Pro", sans-serif;
}

.title {
  color: var(--tertiarycolor) !important;
  font-family: "Source Code Pro", sans-serif !important;
  font-style: normal !important;
  font-weight: normal !important;
}

/* Sidebar */
#toctitle {
  font-family: "Source Code Pro", sans-serif;
}

.sectlevel1 {
  font-family: "Source Code Pro", sans-serif !important;
}

.sectlevel2 {
  font-family: "Source Code Pro", sans-serif !important;
}

/* .icon-tip:before {
  content: "\f0eb";
  text-shadow: 1px 1px 2px rgba(155, 155, 0, .8);
  color: #111
} */


/* Callouts */
.admonitionblock>table td.content {
  color: var(--maincolor);
  border-left: none;
  padding-left: 0;
}

.admonitionblock>table {
  margin-bottom: 0;
}

/* Images */
img:not([alt='Logo']) {
  border-radius: 5px;
  /* glow */
  box-shadow: 0 0 10px var(--glow);
  border: 1px solid var(--glow);
}

.imgcols>.content {
  display: flex;
  flex-direction: row;
  gap: 1em;
}

.imgcols>.content>* {
  flex: 1;
}

.imgcols>.content>.smaller {
  flex: 0.5;
}

.imgcols>.content>.imageblock>.content>img,
.imgcols>.content>.imageblock>.content {
  width: 100%;
}




/* Responsiveness fixes */
video {
  max-width: 100%;
}

@media all and (max-width: 600px) {
  table {
    width: 55vw !important;
    font-size: 3vw;
  }

  .imgcols>.content {
    display: flex;
    flex-direction: column;
  }
}

#footer {
  display: none;
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article text-center">
<div id="header">
<h1>Stackium</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark-reasonable.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<div class="imageblock">
<div class="content">
<img src="stackiumlogo.png" alt="Logo" width="200" height="200">
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://img.shields.io/badge/rustc-%5E1.71.1-orange.svg" alt="rustc %5E1.71.1 orange"></span> <span class="image"><img src="https://github.com/dotjulia/stackium/actions/workflows/main.yml/badge.svg" alt="badge"></span> <span class="image"><a class="image" href="https://github.com/dotjulia/stackium/releases/latest"><img src="https://shields.io/github/downloads-pre/dotjulia/stackium/latest/total?label=Downloads" alt="Download"></a></span> <span class="image"><a class="image" href="https://github.com/dotjulia/stackium/issues"><img src="https://img.shields.io/github/issues/dotjulia/stackium" alt="Issues"></a></span></p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_what_is_stackium">What is Stackium?</a></li>
<li><a href="#_launching_stackium">Launching Stackium</a></li>
<li><a href="#_building_a_c_program_for_stackium">Building a <code>C</code> program for Stackium</a></li>
<li><a href="#_example_for_beginners">Example for Beginners</a></li>
<li><a href="#_sidebar">Sidebar</a></li>
<li><a href="#windows">Window Overview</a>
<ul class="sectlevel2">
<li><a href="#_most_relevant_windows_for_beginners">Most relevant windows for beginners</a></li>
<li><a href="#_other_windows">Other windows</a></li>
</ul>
</li>
<li><a href="#memoryview">Memory View</a></li>
</ul>
</div>
</div>
<div class="sect1 text-left">
<h2 id="_what_is_stackium">What is Stackium?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Stackium is a debugger for educational purposes. It is designed to be easy to use and to provide a good learning experience for beginners to help them understand memory management and pointer semantics in C.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="stackium_final.png" alt="stackium final">
</div>
</div>
</div>
</div>
<div class="sect1 text-left">
<h2 id="_launching_stackium">Launching Stackium</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Optional dependencies:<br>
- <code>objdump</code> for displaying the disassembly in the code view</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">Usage: stackium [OPTIONS] &lt;PROGRAM&gt;

Arguments:
  &lt;PROGRAM&gt;

Options:
  -m, --mode &lt;MODE&gt;  [default: cli] [possible values: cli, web, gui]
  -h, --help         Print help
  -V, --version      Print version</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also use <code>stackium --help</code> to get more information about the options.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1 text-left">
<h2 id="_building_a_c_program_for_stackium">Building a <code>C</code> program for Stackium</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tested for <code>clang version 16.0.6</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Use the provided <code>build_test.sh</code>: <code>build_test.sh &lt;file&gt;.c</code>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>If you do not want to use the provided script, you need to specify the following flags:</p>
</div>
<div class="ulist">
<div class="title">Flags</div>
<ul>
<li>
<p><code>-no-pie</code></p>
<div class="ulist">
<ul>
<li>
<p>disable position independent code (no ASLR)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>-gdwarf-4</code></p>
<div class="ulist">
<ul>
<li>
<p>stackium doesn’t support dwarf-5 yet</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>-fno-omit-frame-pointer</code></p>
<div class="ulist">
<ul>
<li>
<p>stackium uses a very basic approach to build the stack trace which requires the frame pointer to be present</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>-g</code></p>
<div class="ulist">
<ul>
<li>
<p>enable debug symbols</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>-O0</code></p>
<div class="ulist">
<ul>
<li>
<p>disable optimizations</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1 text-left">
<h2 id="_example_for_beginners">Example for Beginners</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Suppose we want to debug this example program saved in file <code>test.c</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-c" data-lang="c">void swap(int* a, int* b)
{
  int tmp = *a;
  *a = *b;
  *b = tmp;
}


int main()
{
  int first = 3;
  int second = 5;
  swap(&amp;first, &amp;second);
  return 0;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s build it using <code>./build_test.sh test.c</code> and then launch stackium in web mode: <code>./stackium test --mode web</code>.</p>
</div>
<div class="paragraph">
<p>After following the URL in the terminal, we can see the following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="stackium_first.png" alt="Stackium Web Interface">
</div>
</div>
<div class="paragraph">
<p>Now, click on the <code>Code</code> window and set breakpoints on all lines by clicking on the circles to the left of them:</p>
</div>
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Breakpoints are denoted by filled circles. When the program gets to a line marked as a breakpoint it stops and you can inspect it.</p>
</div>
<div class="paragraph">
<p>You can verify that the breakpoints have been set by looking at the breakpoint window:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="breakpoint_window.png" alt="Breakpoint Window"></span></p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="breakpoints.png" alt="Breakpoints">
</div>
</div>
</div>
</div>
<div class="openblock imgcols">
<div class="content">
<div class="paragraph">
<p>Now click on continue in the controls window (sometimes in gui mode you&#8217;ll need to click it twice when launching the program for the first time). You can see that the first breakpoint has been hit by the green highlight.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="first_breakpoint.png" alt="First Breakpoint">
</div>
</div>
</div>
</div>
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Open the memory view by clicking the toggle next to <code>Memory</code> in the sidebar to find out what is happening behind the scenes.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The memory view builds up over time but the GUI doesn&#8217;t render new frames automatically. If the memory view doesn&#8217;t seem to update, try moving the mouse cursor. GitHub Issue: <a href="https://github.com/dotjulia/stackium/issues/20" class="bare">https://github.com/dotjulia/stackium/issues/20</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As you can see, the program allocated memory on the stack for the variable <code>first</code> and <code>second</code>. Looking at the content, you&#8217;ll find that they don&#8217;t have the correct value yet. This is because the program was interrupted before the first line in the main function.</p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="stackium_startmemory.png" alt="Memory View">
</div>
</div>
</div>
</div>
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Click on <code>continue</code> until we reach the swap function and you&#8217;ll see that <code>first</code> and <code>second</code> now contains <code>3</code> and <code>4</code>. Before we step into the swap function, let&#8217;s tick the <code>Lock stack start</code> checkbox.</p>
</div>
<div class="paragraph">
<p>It is recommended to do this for such short examples in order to get a better overview. The default behaviour of the memory view is to always try and fit the left stack column to the stack of the current function. By locking the stack start we can see that the stack of the <code>swap</code> function is appended to the end of the stack of the <code>main</code> function.</p>
</div>
<div class="paragraph">
<p>At the end there will be a screenshot of how it would have looked like if we did not lock the start of the stack to the stack of the main function.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="stackium_integers.png" alt="Content of first and second">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="stackium_lockstackstart.png" alt="Lock Stack Start">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If we press continue now, we can see that in the swap function we have two pointers which point into the stack of the main function.</p>
</div>
<div class="paragraph">
<p>Now try to observe on your own what happens when you step through the swap function.</p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="stackium_swap.png" alt="Swap Function">
</div>
</div>
</div>
</div>
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If we didn&#8217;t lock the stack to the main function&#8217;s stack, this is what the swap function would have looked like.</p>
</div>
<div class="paragraph">
<p>As you can see, only the stack of the swap function is displayed and the pointers <code>a</code> and <code>b</code> now point to a <code>[stack]</code> section in the right column.</p>
</div>
<div class="paragraph">
<p>The right column always tries to load memory which is pointed to by variables on the stack and dynamically updates based on the pointer&#8217;s values.</p>
</div>
<div class="paragraph">
<p>In this case, the stack of the main function is loaded on the right side so you can see what is going on.</p>
</div>
<div class="paragraph">
<p>We can also see that the <code>calling base pointer</code> points to the beginning of the stack of the main function.</p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="stackium_final.png" alt="stackium final">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 text-left">
<h2 id="_sidebar">Sidebar</h2>
<div class="sectionbody">
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The sidebar is used to enable and disable specific windows. It can be closed by pressing the <code>X</code> button in the top right corner to get more space.</p>
</div>
<div class="paragraph">
<p>See <a href="#windows">Window Overview</a> for more information about the different windows.</p>
</div>
</div>
</div>
<div class="imageblock smaller">
<div class="content">
<img src="sidebar.png" alt="Sidebar">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1 text-left">
<h2 id="windows">Window Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each window can be put into fullscreen by pressing the fullscreen button in the top right corner of the window. Using the exit fullscreen button in the top left corner the window can be minimized again.</p>
</div>
<div class="sect2">
<h3 id="_most_relevant_windows_for_beginners">Most relevant windows for beginners</h3>
<details>
<summary class="title">Code</summary>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>See the compiled <code>C</code> program and set breakpoints</p>
</li>
<li>
<p>The green highlighted line represents the current point of the program.</p>
</li>
<li>
<p>Clicking on the <code>Disassemble</code> tab will display the assembly of the currently running program</p>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title">Controls</summary>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Continue the execution from the current breakpoint. When launching <code>stackium</code> the program is halted at the very beginning. To get to the start of the main function set a breakpoint at the first line of the main function and press <code>continue</code></p>
</li>
<li>
<p><code>Continue</code> and <code>Step Instruction</code> are currently working.</p>
</li>
<li>
<p><code>Step Over</code> and <code>Step In</code> often results in unexpected behaviour</p>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title">Memory</summary>
<div class="content">
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Displays the stack and heap of the current function</p>
</li>
<li>
<p>The left column is the stack of the current function</p>
</li>
<li>
<p>The right column is loaded dynamically based on the pointer values on the stack</p>
</li>
<li>
<p>More information about the memory view can be found in <a href="#memoryview">Memory View</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="memory_view_example.png" alt="Memory View">
</div>
</div>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Graph</summary>
<div class="content">
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Displays all variables as a node in an interactive graph where the edges are pointers between the variables.</p>
</li>
<li>
<p>Nodes can be dragged with the mouse</p>
</li>
<li>
<p>This view is useful to debug data structures like linked lists or binary trees</p>
</li>
<li>
<p>In this example the first <code>Node*</code> is the pointer on the <code>stack</code> pointing to the first Node on the heap. All the other nodes lie on the heap</p>
</li>
</ul>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="graph_example.png" alt="Memory View">
</div>
</div>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_other_windows">Other windows</h3>
<details>
<summary class="title">Other Windows</summary>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Metadata</p>
<div class="ulist">
<ul>
<li>
<p>Displays information like binary name, files, number of functions and number of variables.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Location</p>
<div class="ulist">
<ul>
<li>
<p>Displays the current location in the program</p>
</li>
<li>
<p>(currently broken, use the code view instead)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Breakpoints</p>
<div class="ulist">
<ul>
<li>
<p>Get a list of all breakpoints</p>
</li>
<li>
<p>Set breakpoints by specifying a function name or an address</p>
</li>
</ul>
</div>
</li>
<li>
<p>Settings</p>
<div class="ulist">
<ul>
<li>
<p>Various settings, probably only useful for switching between light and dark mode</p>
</li>
</ul>
</div>
</li>
<li>
<p>Registers</p>
<div class="ulist">
<ul>
<li>
<p>Displays the content of some registers</p>
</li>
</ul>
</div>
</li>
<li>
<p>Memory Mapping</p>
<div class="ulist">
<ul>
<li>
<p>Displays all mapped memory regions</p>
</li>
<li>
<p>uses <strong><code>/proc/self/maps</code></strong></p>
</li>
<li>
<p>This mapping is also used by <code>stackium</code> to determine which pointers point to valid memory</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</details>
</div>
</div>
</div>
<div class="sect1 text-left">
<h2 id="memoryview">Memory View</h2>
<div class="sectionbody">
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The data is split into two columns.</p>
</div>
<div class="paragraph">
<p>The left column represents the current stack with the corresponding addresses and bytes. The highest address is at the top and the smallest at the bottom.</p>
</div>
<div class="paragraph">
<p>The current stack is always just the stack used by the currently executing function. The stack starting address can be locked by ticking the <code>lock stack</code> checkbox.</p>
</div>
<div class="paragraph">
<p>The right column displays additionally loaded memory sections which got loaded by references in the stack.</p>
</div>
<div class="paragraph">
<p>These additionally loaded sections could be heap, library code loaded by the return pointer, other parts of the stack which are not part of the left column, …</p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="memory_view_example.png" alt="Memory View">
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Variables on the right side are discovered by following pointers from the stack with the assumption that they contain meaningful data if they point to a valid memory region.<br>
It is up to the user to confirm that variables on the heap contain the expected data.
</td>
</tr>
</table>
</div>
<div class="openblock imgcols">
<div class="content">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Variables are represented by vertical lines</p>
</div>
<div class="paragraph">
<p>Structs and arrays consist of multiple vertical lines. The first one representing the memory of the struct and all others to the right being a member variable.</p>
</div>
<div class="paragraph">
<p>Arrays consist of one line representing the whole array and additionally one for each item.</p>
</div>
<div class="openblock imgcols">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="memoryview_pointers.png" alt="Pointers">
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Pointers are represented by lines connecting the pointer to the memory it points to.</p>
</div>
<div class="paragraph">
<p>If the value of the pointer is not within a loaded section, a questionmark is drawn instead.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="imageblock smaller">
<div class="content">
<img src="memoryview_struct.png" alt="Struct">
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The value of the pointer being within a valid memory region doesn&#8217;t imply that it points to meaningful data.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Due to optimization freed memory is often still within valid memory regions which means pointers to that memory location are still rendered. To avoid this set your pointers to <code>NULL</code> after freeing them (this is also a good way to avoid bugs).
</td>
</tr>
</table>
</div>
<script src="
https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js
"></script>
<link href="
https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/style.min.css
" rel="stylesheet">
<script>
mediumZoom('img', {
    background: '#322342',
    scrollOffset: 0,
})
</script>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-12-03 17:38:52 UTC
</div>
</div>
</body>
</html>